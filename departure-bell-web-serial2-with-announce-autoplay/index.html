<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>どこでも発車ベル（Web + Serial）</title>
<link rel="manifest" href="manifest.webmanifest">
<style>
  body{font-family:system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif; background:#081021; color:#e6eef8; margin:0; padding:18px;}
  .card{max-width:900px;margin:0 auto;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)); padding:18px;border-radius:12px;}
  h1{margin:0 0 6px;font-size:20px}
  p.sub{margin:0 0 12px;color:#9fb1c9}
  .row{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
  button,input,select{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:#0f1724;color:inherit}
  button.primary{background:linear-gradient(180deg,#38bdf8,#0284c7);color:#002028;border:none}
  .file-info{color:#bcd3e6;font-size:13px}
  #log{height:120px;overflow:auto;background:#07111a;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);font-size:13px}
  label{display:inline-flex;align-items:center;gap:6px}
  footer{margin-top:12px;color:#86a5c2;font-size:13px}
</style>
</head>
<body>
<div class="card">
  <h1>どこでも発車ベル（Web + Serial）</h1>
  <p class="sub">ローカル音源を選択して再生。USBシリアル（Web Serial API）で「1/0」を受け取ると再生/停止します。</p>

  <div class="row">
    <input id="fileInput" type="file" accept="audio/*">
<br><label>戸締め放送ファイル選択:</label>
<input type="file" id="announceInput" accept="audio/*">
    <div class="file-info" id="fileStatus">未選択</div>
  </div>

  <div class="row">
    <button id="playBtn" class="primary">▶ 再生</button>
    <button id="pauseBtn">⏸ 一時停止</button>
    <button id="stopBtn">⏹ 停止</button>
    <label><input id="loopChk" type="checkbox"> ループ</label>
    <label>音量 <input id="volume" type="range" min="0" max="1" step="0.01" value="1"></label>
  </div>

  <div style="height:1px;background:rgba(255,255,255,0.03);margin:12px 0"></div>

  <h3>USBシリアル（オプション）</h3>
  <div class="row">
    <select id="baudRate"><option value="9600">9600</option><option value="19200">19200</option><option value="38400">38400</option><option value="115200">115200</option></select>
    <button id="serialBtn">シリアル接続</button>
    <div class="file-info" id="serialStatus">未接続（Web Serial対応のブラウザで使用）</div>
  </div>
  <div class="row">
    <div id="log"></div>
  </div>

  <footer>注意: Web SerialはHTTPSまたはlocalhost上で動作します。対応ブラウザ（Android版Chrome等）でご利用ください。</footer>
</div>

<script src="main.js"></script>
</body>
</html>